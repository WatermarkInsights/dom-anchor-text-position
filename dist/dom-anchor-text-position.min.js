!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","dom-seek"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("dom-seek"));else{var r={exports:{}};t(r.exports,r,e.seek),e.domAnchorTextPosition=r.exports}}(this,function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(e.nodeType===Node.TEXT_NODE)return e;var t=global.document.createTreeWalker(e,NodeFilter.SHOW_TEXT);return t.firstChild()}var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=o(r),s=function(){function e(t,r,o){if(n(this,e),void 0===t)throw new Error('missing required parameter "root"');if(void 0===r)throw new Error('missing required parameter "start"');if(void 0===o)throw new Error('missing required parameter "end"');this.root=t,this.start=r,this.end=o}return d(e,[{key:"toRange",value:function(){var e=this.root,t=global.document.createRange(),r=global.document.createNodeIterator(e,NodeFilter.SHOW_TEXT),o=this.start,n=this.end,i=a["default"](r,o),d=o-i;r.pointerBeforeReferenceNode?t.setStart(r.referenceNode,d):(t.setStart(r.nextNode(),d),r.previousNode());var s=n-o+d;return i=a["default"](r,s),d=s-i,r.pointerBeforeReferenceNode?t.setEnd(r.referenceNode,d):t.setEnd(r.nextNode(),d),t}},{key:"toSelector",value:function(){return{type:"TextPositionSelector",start:this.start,end:this.end}}}],[{key:"fromRange",value:function(t,r){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===r)throw new Error('missing required parameter "range"');var o=r.startContainer,n=r.startOffset;o.nodeType!==Node.TEXT_NODE&&(n===o.childNodes.length?(o=o.childNodes[n-1],o=i(o),n=o.textContent.length):(o=o.childNodes[n],o=i(o),n=0));var d=r.endContainer,s=r.endOffset;d.nodeType!==Node.TEXT_NODE&&(s===d.childNodes.length?(d=d.childNodes[s-1],d=i(d),s=d.textContent.length):(d=d.childNodes[s],d=i(d),s=0));var u=global.document.createNodeIterator(t,NodeFilter.SHOW_TEXT),f=a["default"](u,o),l=f+a["default"](u,d);return new e(t,f+n,l+s)}},{key:"fromSelector",value:function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new e(t,r.start,r.end)}}]),e}();t.exports=s});
//# sourceMappingURL=dom-anchor-text-position.min.js.map