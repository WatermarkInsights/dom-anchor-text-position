!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","dom-seek"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("dom-seek"));else{var r={exports:{}};t(r.exports,r,e.seek),e.domAnchorTextPosition=r.exports}}(this,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(e.nodeType===Node.TEXT_NODE)return e;var t=global.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);return t.firstChild()}var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=n(r),l=function(){function e(t,r){if(o(this,e),void 0===t)throw new Error('missing required parameter "start"');if(void 0===r)throw new Error('missing required parameter "end"');this.start=t,this.end=r}return d(e,[{key:"toRange",value:function(){var e=global.document.createRange(),t=global.document.createNodeIterator(global.document.body,NodeFilter.SHOW_TEXT,null,!1),r=this.start,n=this.end,o=a["default"](t,r),i=r-o;t.pointerBeforeReferenceNode?e.setStart(t.referenceNode,i):(e.setStart(t.nextNode(),i),t.previousNode());var d=n-r+i;return o=a["default"](t,d),i=d-o,t.pointerBeforeReferenceNode?e.setEnd(t.referenceNode,i):e.setEnd(t.nextNode(),i),e}},{key:"toSelector",value:function(){return{type:"TextPositionSelector",start:this.start,end:this.end}}}],[{key:"fromRange",value:function(t){if(void 0===t)throw new Error('missing required parameter "range"');var r=t.startContainer,n=t.startOffset;r.nodeType!==Node.TEXT_NODE&&(n===r.childNodes.length?(r=r.childNodes[n-1],r=i(r),n=r.textContent.length):(r=r.childNodes[n],r=i(r),n=0));var o=t.endContainer,d=t.endOffset;o.nodeType!==Node.TEXT_NODE&&(d===o.childNodes.length?(o=o.childNodes[d-1],o=i(o),d=o.textContent.length):(o=o.childNodes[d],o=i(o),d=0));var l=global.document.createNodeIterator(global.document.body,NodeFilter.SHOW_TEXT,null,!1),u=a["default"](l,r),s=u+a["default"](l,o);return new e(u+n,s+d)}},{key:"fromSelector",value:function(t){if(void 0===t)throw new Error('missing required parameter "selector"');return new e(t.start,t.end)}}]),e}();t.exports=l});
//# sourceMappingURL=dom-anchor-text-position.min.js.map